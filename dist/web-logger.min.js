/*!
 * WebLogger v1.0.0 [https://github.com/zengzhifei/web-logger#readme]
 * @author zengzhifei <zengzhifei@outlook.com>
 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("WebLogger",[],t):"object"==typeof exports?exports.WebLogger=t():e.WebLogger=t()}(this,function(){return function(e){function t(n){if(o[n])return o[n].exports;var r=o[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var o={};return t.m=e,t.c=o,t.p="",t(0)}([function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(1),s=n(u),a=o(2),l=n(a),c=o(3),f=n(c),d=o(4),p=n(d),g=o(6),b=n(g),h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this.version=s["default"].version,this.modules=["network","error"],this.configs={mountedModules:[],modulesCallback:function(e){}};var o={network:p["default"],error:b["default"]};if(t.hasOwnProperty("mountedModules")&&l["default"].isArray(t.mountedModules)&&t.mountedModules.length){var n=[];for(var i in t.mountedModules)this.modules.indexOf(t.mountedModules[i])>-1&&n.push(t.mountedModules[i]);this.configs.mountedModules=n}else for(var u in this.modules)this.configs.mountedModules.push(this.modules[u]);if(t.hasOwnProperty("modulesCallback")&&l["default"].isFunction(t.modulesCallback)&&(this.configs.modulesCallback=t.modulesCallback),this.configs.mountedModules.length)for(var a in this.configs.mountedModules){var c=t[this.configs.mountedModules[a]];l["default"].isObject(c)&&(l["default"].isObject(this.configs[this.configs.mountedModules[a]])?l["default"].mergeObject(this.configs[this.configs.mountedModules[a]],c):this.configs[this.configs.mountedModules[a]]=c);var d=this.getModuleConfig(this.configs.mountedModules[a]);if(l["default"].isFunction(o[this.configs.mountedModules[a]])){var g=new o[this.configs.mountedModules[a]](d);f["default"].mountModule(this.configs.mountedModules[a],g)}else this.configs.mountedModules.splice(a,1)}}return i(e,[{key:"config",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l["default"].isNull(e)||l["default"].isString(e)&&l["default"].isNull(t)?l["default"].isNull(e)?this.configs:this.configs[e]:(l["default"].isObject(e)?l["default"].mergeObject(this.configs,e):l["default"].isString(e)&&(l["default"].isObject(this.configs[e])&&l["default"].isObject(t)?l["default"].mergeObject(this.configs[e],t):this.configs[e]=t),this)}},{key:"getModuleConfig",value:function(e){var t={};return e&&l["default"].isString(e)&&this.modules.indexOf(e)>-1&&(t=l["default"].isObject(this.configs[e])?this.configs[e]:{},(!t.hasOwnProperty("callback")||!l["default"].isFunction(t.callback))&&(t.callback=this.configs.modulesCallback)),t}},{key:"reload",value:function(e){var t=e&&l["default"].isString(e)&&this.modules.indexOf(e)>-1?[e]:this.configs.mountedModules;for(var o in t){var n=this.getModuleConfig(t[o]),r=f["default"].getMountedModule(t[o]);l["default"].isObject(r)&&r.setOptions(n)}}}]),e}();t["default"]=h,e.exports=t["default"]},function(e,t){e.exports={name:"web-logger",version:"1.0.0",description:"A logger plugin for web page",main:"dist/web-logger.min.js",directories:{test:"test"},scripts:{test:"mocha"},repository:{type:"git",url:"git+https://github.com/zengzhifei/web-logger.git"},keywords:["logger","monitor"],author:"zengzhifei <zengzhifei@outlook.com>",license:"MIT",bugs:{url:"https://github.com/zengzhifei/web-logger/issues"},homepage:"https://github.com/zengzhifei/web-logger#readme",devDependencies:{"babel-core":"^6.26.3","babel-loader":"^6.2.4","babel-plugin-add-module-exports":"^1.0.0","babel-preset-es2015":"^6.24.1","babel-preset-stage-3":"^6.24.1","json-loader":"^0.5.7",mocha:"^5.2.0",webpack:"^1.12.11"}}},function(e,t){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),r=new(function(){function e(){o(this,e)}return n(e,[{key:"isArray",value:function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{key:"isString",value:function(e){return"[object String]"===Object.prototype.toString.call(e)}},{key:"isFunction",value:function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{key:"isObject",value:function(e){return"[object Object]"===Object.prototype.toString.call(e)}},{key:"isNumber",value:function(e){return"[object Number]"===Object.prototype.toString.call(e)}},{key:"isBoolean",value:function(e){return"[object Boolean]"===Object.prototype.toString.call(e)}},{key:"isNull",value:function(e){return"[object Null]"===Object.prototype.toString.call(e)}},{key:"mergeObject",value:function(e,t){if(r.isObject(e)&&r.isObject(t))for(var o in t)e[o]=e[o]&&r.isObject(e[o])?this.mergeObject(e[o],t[o]):t[o];return e}}]),e}());t["default"]=r,e.exports=t["default"]},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(2),s=n(u),a=new(function(){function e(){r(this,e),this.mountedModules={}}return i(e,[{key:"mountModule",value:function(e,t){e&&s["default"].isString(e)&&t&&s["default"].isObject(t)&&(this.mountedModules[e]=t)}},{key:"getMountedModule",value:function(e){return e&&s["default"].isString(e)&&this.mountedModules.hasOwnProperty(e)?this.mountedModules[e]:null}}]),e}());t["default"]=a,e.exports=t["default"]},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=o(5),l=n(a),c=o(2),f=n(c),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._mockAjax(),o}return u(t,e),s(t,[{key:"_mockAjax",value:function(){var e=this,t=window.XMLHttpRequest.prototype.open,o=window.XMLHttpRequest.prototype.send;window.XMLHttpRequest.prototype.open=function(){var o=this,n=[].slice.call(arguments);try{var r=null,i=-1;o._network={requestMethod:n[0],requestUrl:n[1],requestType:n[2]?"async":"sync"};var u=o.onreadystatechange||function(){},s=function(){return 0===o.readyState?!o._network.requestTime&&(o._network.requestTime=+new Date):1===o.readyState?!o._network.requestTime&&(o._network.requestTime=+new Date):2===o.readyState||3===o.readyState||4===o.readyState&&(r&&clearInterval(r),o._network.requestTimeout=o.timeout,o._network.requestHeader=o.getAllResponseHeaders().split("\n"),o._network.responseStatus=o.status,o._network.responseType=o.responseType,o._network.responseResult=o.response,o._network.responseTime=+new Date,o._network.costTime=o._network.responseTime-(o._network.requestTime||o._network.responseTime),f["default"].isFunction(e.configs.callback)&&setTimeout(function(){e.configs.callback(o._network)},1)),u.apply(o,arguments)};o.onreadystatechange=s,r=setInterval(function(){i!==o.readyState&&(i=o.readyState)&&s.call(o)},10)}catch(a){console.log(a)}return t.apply(this,n)},window.XMLHttpRequest.prototype.send=function(){var e=this,t=[].slice.call(arguments);try{if("POST"===e._network.requestMethod.toLocaleUpperCase()){var n={};t[0]&&t[0].split("&").forEach(function(e,t){e=e.split("=");var o=decodeURIComponent(e[0].replace(/\+/g," "));n[o]=decodeURIComponent(e[1].replace(/\+/g," "))}),e._network.requestData=n}}catch(r){console.log(r)}return o.apply(this,t)}}}]),t}(l["default"]);t["default"]=d,e.exports=t["default"]},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),u=o(2),s=n(u),a=function(){function e(t){r(this,e),this.configs={callback:function(e){}},this.setOptions(t)}return i(e,[{key:"setOptions",value:function(e){s["default"].isObject(e)&&s["default"].mergeObject(this.configs,e)}}]),e}();t["default"]=a,e.exports=t["default"]},function(e,t,o){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var o=0;o<t.length;o++){var n=t[o];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),a=o(5),l=n(a),c=o(2),f=n(c),d=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,t);var o=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return o._mockError(),o}return u(t,e),s(t,[{key:"_mockError",value:function(){var e=this,t=void 0;window.addEventListener("error",function(o){t=o.target===window?{errorMessage:o.message,errorFileName:o.filename,errorLineNo:o.lineno,errorColNo:o.colno,errorTime:+new Date,errorStack:o.error&&o.error.stack?o.error.stack.toString():""}:{errorMessage:o.target.outerHTML+" 404 (Not Found)",errorFileName:o.target.baseURI,errorLineNo:0,errorColNo:0,errorTime:+new Date,errorStack:o.error&&o.error.stack?o.error.stack.toString():""},f["default"].isFunction(e.configs.callback)&&setTimeout(function(){e.configs.callback(t)},1)},!0)}}]),t}(l["default"]);t["default"]=d,e.exports=t["default"]}])});